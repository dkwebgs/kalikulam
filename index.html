<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Lady's apparitions kallikulam</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="google" value="notranslate" />
    <meta http-equiv="Content-Language" content="en" />
    <meta name="description" content="Discover Carlo Acutis, servant of God's, exibition about Our Lady's apparitions and messages which have been approved by the Church." />
    <meta name="keywords" content="Marian Apparitions, Apparitions Of Our Lady, The Virgin Mary, Holy Rosary, Our Lady's Appeals, Appeals, Messages, Fatima Lourdes Blessed Virgin, Our Lady, The Immaculate Conception, Assumption Into Heaven, Nativity, St. Joseph, Medjugorje, Sister Lucia, Bernadette, Francisco and Jacinta, The Vatican, Pope Francis, John Paul II, Shrines, The Church, The Mother Of Jesus, The Annunciation, Passion, Crucifixion, God, Pope, Catechism, Catechesis, Mary, The Holy Spirit, The Immaculate Heart Of Mary, Consecration" />
    <meta name="date" content="2015-03-25T12:45:00+00:00" />
    <meta name="date_modified" content="2015-03-25T12:46:00+00:00" />
    <meta name="googlebot" content="&nbsp;" />
    <meta name="google-site-verification" content="t4AN5COkOqDyoe0ucEOuTzgLsgtGAO-7_gkEBry-etI" />
    
    <link rel="shortcut icon" href="https://www.themarianapparitions.org/assets/css/images/favicon_3.ico" type="image/vnd.microsoft.icon" />
    <link rel="stylesheet" href="assets/css/normalize.css" type="text/css">
    <link rel="stylesheet" href="assets/css/home1.css" type="text/css">	
    <link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.css" type="text/css">
    <link rel="stylesheet" href="assets/css/jquery-impromptu.min.css" type="text/css">
    
    <!-- jQuery with proper fallbacks -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script>window.jQuery || document.write('<script src="assets/js/jquery-3.7.0.min.js"><\/script>')</script>
    <script src="https://code.jquery.com/jquery-migrate-1.4.1.min.js"></script>
    <script>window.jQuery.migrateWarnings || document.write('<script src="assets/js/jquery-migrate-1.4.1.min.js"><\/script>')</script>
    
    <script type="text/javascript" src="assets/js/jquery.lettering-0.6.1.min.js"></script>  
    <script type="text/javascript" src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
    <script type="text/javascript" src="assets/js/jquery.lazyload.min.js"></script>
    <script type="text/javascript" src="assets/js/jquery-impromptu.min.js"></script>
    <link rel="stylesheet" href="assets/css/mgmenu_avm.css" type="text/css">
    <link href="assets/css/print.css" rel="stylesheet" media="print" type="text/css">
    <script type="text/javascript" src="assets/js/mgmenu.js"></script>
    <script type="text/javascript" src="assets/js/hoverIntent.js"></script>
    <script type="text/javascript" src="assets/js/jquery.vegas_slide.js"></script>
    <script type="text/javascript" src="assets/js/FWDMegazoom.js"></script>
    <script type="text/javascript" src="assets/js/jquery.PrintArea.js_4.js"></script>
    <script type="text/javascript" src="assets/js/flag_avm.js"></script>

    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: hwb(46 2% 8%);
            color: #fff;
            overflow-x: hidden;
        }
        
        /* Responsive fixes */
        @media (max-width: 1200px) {
            #avm_list_city {
                width: 180px; /* Reduced width */
            }
            #avm_cont_page_right {
                margin-left: 85px; /* Reduced margin */
                width: calc(100% - 200px); /* Adjusted width */
            }
        }

        @media (max-width: 768px) {
            #avm_list_city {
                position: fixed;
                left: -250px;
                top: 0;
                height: 100vh;
                z-index: 1000;
                background: #1a1a1a4a !important;
                transition: left 0.3s ease;
                width: 250px !important;
            }
            
            #avm_list_city.mobile-open {
                left: 0;
            }
            
            #avm_cont_page_right {
                margin-left: 0 !important;
                width: 100% !important;
            }
            
            .mobile-menu-toggle {
                display: block;
                position: fixed;
                top: 10px;
                left: 10px;
                z-index: 1001;
                background: #333;
                color: white;
                border: none;
                padding: 10px;
                border-radius: 5px;
                cursor: pointer;
            }
            
            #avm_menu_list {
                font-size: 12px;
            }
            
            #avm_cont_page {
                width: 100% !important;
            }
            
            #flag_top {
                display: none;
            }
        }

        @media (max-width: 480px) {
            #avm_ico .ico {
                padding: 5px;
                margin: 2px;
                width: 30px !important;
                height: 30px !important;
            }
            
            #avm_photo img {
                max-width: 100%;
                height: auto;
            }
            
            #avm_logo_top, #avm_logo_stars_top {
                width: 150px !important;
                height: 150px !important;
            }
            
            #avm_logo_top img, #avm_logo_stars_top img {
                width: 100%;
                height: auto;
            }
            
            #avm_ico {
                flex-direction: column;
                align-items: center;
                max-width: 80px !important;
                padding: 5px !important;
            }
        }

        .mobile-menu-toggle {
            display: none;
        }

        .error-message {
            color: #d9534f;
            padding: 20px;
            text-align: center;
            font-style: italic;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
        
        .success-message {
            color: #5cb85c;
            padding: 10px;
            text-align: center;
        }

        /* Fix for jQuery Migrate error */
        if (typeof jQuery !== 'undefined') {
            jQuery.migrateMute = true;
        }
        
        /* Layout styles */
        #gallery_background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: #0000004a url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80') no-repeat center center;
            background-size: cover;
            opacity: 0.7;
        }
        
        #avm_menu_top {
            height: 40px;
            background: rgba(0, 0, 0, 0.187);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 100;
        }
        
        #avm_menu_list {
            position: fixed;
            top: 40px;
            left: 0;
            width: 100%;
            z-index: 99;
            background: rgba(0, 0, 0, 0.233);
        }
        
        #avm_fregio_dec, #avm_left_dec {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }
        
        #avm_logo_top, #avm_logo_stars_top {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 205px;
            height: 205px;
            z-index: 101;
        }
        
        #avm_sf_text {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.228);
            z-index: 50;
        }
        
        #avm_cont_page {
            position: fixed;
            top: 80px;
            left: 0;
            width: 100%;
            height: calc(100% - 80px);
            z-index: 20;
        }
        
        #avm_cont_page_left {
            position: absolute;
            left: 0;
            top: 0;
            width: 205px;
            height: 100%;
        }
        
        #avm_page_left {
            width: 100%;
            height: 100%;
        }
        
        #avm_cont_page_right {
            position: absolute;
            left: 85px;
            top: 0;
            width: calc(100% - 205px);
            height: 100%;
            background: rgba(0, 0, 0, 0.16);
            padding: 20px;
            overflow: auto;
        }
        
        #avm_page_right {
            width: 100%;
            height: 100%;
            color: #fff;
            font-size: 24px;
            font-weight: bold;
        }
        
        #avm_list_city {
            position: fixed;
            top: 216px;
            left: 25;
            width: 200px; /* Reduced from 291px */
            height: calc(100% - 205px);
            background: #1a1a1a5b;
            color: #fff;
            z-index: 90;
            overflow: hidden;
            box-shadow: 2px 0 5px rgba(0,0,0,0.5);
        }
        
        #avm_list_city_search {
            padding: 10px;
            border-bottom: 1px solid #333;
        }
        
        #avm_list_city_search input {
            width: 100%;
            padding: 8px;
            border: 1px solid #444;
            border-radius: 4px;
            background: #2a2a2a61;
            color: #6f3131;
        }
        
        #avm_cont_list_city {
            height: calc(100% - 50px);
            overflow-y: auto;
            padding: 10px;
        }
        
        .navList {
            list-style: none;
        }
        
        .navList > li {
            margin-bottom: 10px;
            font-weight: bold;
            color: #e0e0e0;
        }
        
        .topList {
            list-style: none;
            margin-left: 15px;
            margin-top: 5px;
        }
        
        .topList li {
            margin-bottom: 5px;
        }
        
        .topList a {
            color: #ccc;
            text-decoration: none;
            display: block;
            padding: 5px;
            border-radius: 3px;
            transition: background 0.3s;
        }
        
        .topList a:hover, .topList a.active {
            background: #333;
            color: #fff;
        }
        
        #no_result {
            display: none;
            padding: 10px;
            text-align: center;
            color: #999;
            font-style: italic;
        }
        
        /* Flag styling - FIXED: Horizontal alignment */
        #flag_top {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1000;
            padding: 5px;
            background: rgba(0, 0, 0, 0.347);
            border-radius: 5px;
        }
        
        #cont_Flag_avm_site {
            display: flex;
            /* flex-wrap: wrap; */
            justify-content: flex-end;
            gap: 5px;
        }
        
        #cont_Flag_avm_site a {
            display: block;
        }
        
        #cont_Flag_avm_site img {
            width: 30px;
            height: 20px;
            border: 1px solid #444;
            border-radius: 2px;
            transition: transform 0.2s;
        }
        
        #cont_Flag_avm_site img:hover {
            transform: scale(1.1);
        }
        
        /* Icon styling */
        #cont_avm_ico {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 30;
        }
        
        #avm_ico {
            display: flex;
            flex-direction: column;
            padding: 10px;
            background: rgba(0, 0, 0, 0.37);
            border-radius: 5px;
            gap: 8px;
        }
        
        #avm_ico .ico {
            width: 40px;
            height: 40px;
            cursor: pointer;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.7;
            transition: opacity 0.3s, transform 0.2s;
        }
        
        #avm_ico .ico:hover, #avm_ico .ico.active {
            opacity: 1;
            transform: scale(1.1);
        }
        
        .ico_earth {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>');
        }
        
        .ico_photo_view {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>');
        }
        
        .ico_text {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z"/></svg>');
        }
        
        .ico_zoom {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>');
        }
        
        .ico_print {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"/></svg>');
        }
        
        .ico_download {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>');
        }
        
        /* Content areas */
        #avm_map, #avm_text, #avm_zoom, #avm_photo {
            position: absolute;
            top: 70px;
            left: 0;
            width: 100%;
            height: calc(100% - 70px);
            display: none;
        }
        
        #avm_photo {
            display: flex;
            justify-content: center;
            align-items: center;
            background: #0000003c;
        }
        
        #avm_photo img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        #avm_text {
            background: #fff;
            color: #000;
            padding: 20px;
            overflow-y: auto;
        }
        
        #avm_map {
            background: #e9e9e9;
        }
        
        #avm_zoom {
            background: #00000063;
        }
        
        #avm_preloader {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 40;
        }
        
        /* Carlo Acutis section */
        #cont_carlo_acutis {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
        }
        
        #link_carlo_acutis img {
            width: 80px;
            height: auto;
            border-radius: 5px;
        }
        
        /* Preview styling */
        #preview {
            position: absolute;
            z-index: 200;
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }
        
        #preview img {
            max-width: 200px;
            max-height: 150px;
            display: block;
        }
        
        /* Menu styling */
        .mgmenu {
            display: flex;
            justify-content: left;
            list-style: none;
            padding: 10px 0;
        }
        
        .mgmenu > li {
            position: relative;
            margin: 0 15px;
        }
        
        .mgmenu > li > a, .mgmenu > li > span {
            color: #fff;
            text-decoration: none;
            padding: 10px 15px;
            display: block;
            font-size: 16px;
            transition: background 0.3s;
        }
        
        .mgmenu > li:hover > a, .mgmenu > li:hover > span {
            background: rgba(255,255,255,0.1);
        }
        
        .dropdown_container {
            position: absolute;
            top: 100%;
            left: 0;
            background: #fff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            min-width: 200px;
            z-index: 1000;
        }
        
        .dropdown_flyout {
            list-style: none;
            padding: 10px 0;
        }
        
        .dropdown_flyout li a {
            color: #333;
            text-decoration: none;
            padding: 8px 20px;
            display: block;
            transition: background 0.3s;
        }
        
        .dropdown_flyout li a:hover {
            background: #f0f0f0;
        }
    </style>

<script>    
var obj_js = {
    width_min: 320,
    height_min: 480,
    margin: 25,
    lg_sigle: 'en',
    lg: '2',
    base_url: 'https://www.themarianapparitions.org/',
    is_mobile: '0'
};

// Initialize window size
obj_js.wind = getViewWindSize(obj_js.width_min, obj_js.height_min);

// Fixed JSON data
try {
    obj_js.site = {
        "id": {"1":"1","2":"2","3":"3","4":"4","5":"5","6":"6","10":"10","11":"11","12":"12","21":"21"},
        "name": {"1":"Italiano","2":"English","3":"French","4":"German","5":"Spanish","6":"Portuguese","10":"Russian","11":"Polish","12":"Chinese","21":"Philippines"},
        "title": {"1":"Italiano","2":"English","3":"Français","4":"Deutsch","5":"Español","6":"Português","10":"Русский","11":"Polski","12":"中文","21":"Pilipino"},
        "sigle": {"1":"it","2":"en","3":"fr","4":"de","5":"es","6":"pt","10":"ru","11":"pl","12":"cn","21":"rp"},
        "welcome": {"1":"Sito ufficiale","2":"Official website","3":"Site officiel","4":"Offizielle Seite","5":"Sitio web oficial","6":"Site oficial","10":"Раб Божий","11":"Oficjalna strona","12":"上帝的门徒","21":"Alagad ng Diyos"},
        "link_site": {"1":"Sito Ufficiale <br><span style=\"font-size:1.9em;\">San Carlo Acutis</span>","2":"Official website<br><span style=\"font-size:1.9em;\">San Carlo Acutis</span>","3":"Site officiel<br><span style=\"font-size:1.9em;\">San Carlo Acutis</span>","4":"Website<br><span style=\"font-size:1.9em;\" >Carlo Acutis</span><br>für Erzieher, Jugendliche<br>und Gebetsgruppen","5":"Sitio web oficial<br><span style=\"font-size:1.9em;\">San Carlo Acutis</span>","6":"Site Oficial<br><span style=\"font-size:1.9em;\" >Carlo Acutis</span><br>para educadores, jovens<br>e grupos de oração","10":"Официальный веб-сайт<br><span style=\"font-size:1.9em;\" >Карло Акутис</span><br>для педагогов, молодёжи<br>и молитвенных групп","11":"Strona oficjalna Stowarzyszenia<br><span style=\"font-size:1.9em;\">Carla Acutisa</span><br> i Sprawy Beatyfikacji <br>Слуги Божьего Carla Acutisa","12":"官方网站<br><span style=\"font-size:1.9em;\" >Carlo Acutis</span><br>对于教育工作者，年轻人<br>和祈祷团队协会的","21":"Opisyal na Website<br><span style=\"font-size:1.9em;\" >Carlo Acutis</span><br>para sa mga Tagaturo, Kabataan<br> at mga Prayer Group"}
    };
} catch (e) {
    console.error('Error parsing JSON data:', e);
    obj_js.site = {};
}

function getViewWindSize(w_f, h_f) {
    var elmt = window, prop = "inner";
    if (!("innerWidth" in window)) {
        elmt = document.documentElement || document.body;
        prop = "client";
    }
    return {
        width: Math.max(elmt[prop + "Width"], w_f),
        height: Math.max(elmt[prop + "Height"], h_f)
    };
}

function strip_tags(input, allowed) {
    if (!input) return '';
    
    allowed = (((allowed || '') + '')
        .toLowerCase()
        .match(/<[a-z][a-z0-9]*>/g) || [])
        .join('');
    
    var tags = /<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,
        commentsAndPhpTags = /<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;
    
    return input.replace(commentsAndPhpTags, '')
        .replace(tags, function($0, $1) {
            return allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';
        });
}

// Sample data for testing
var sampleCityData = {
    "kallikulam": {
        "name": "KALLIKULAM",
        "text": "<h3>Our Lady of Kallikulam</h3><p>Kallikulam is a village in Tamil Nadu, India, known for the apparitions of Our Lady. The village has a significant Christian population and is home to the St. Mary's Church.</p><p>The apparitions reported here have drawn pilgrims from various parts of India and beyond, seeking spiritual solace and blessings.</p>",
        "src": "https://picsum.photos/800/600?random=1",
        "src_zoom": "https://picsum.photos/1200/900?random=1",
        "src_ex": true,
        "src_zoom_ex": true,
        "latitudine": "8.3546000000000000",
        "longitudine": "77.6643000000000000",
        "all_images": []
    },
    "vailankanni": {
        "name": "VAILANKANNI", 
        "text": "<h3>Our Lady of Good Health</h3><p>Vailankanni is a famous pilgrimage site in Tamil Nadu, India, dedicated to Our Lady of Good Health. It is often referred to as the 'Lourdes of the East'.</p><p>Thousands of pilgrims visit the Basilica each year, especially during the festival of the Nativity of Mary.</p>",
        "src": "https://picsum.photos/800/600?random=2",
        "src_zoom": "https://picsum.photos/1200/900?random=2",
        "src_ex": true,
        "src_zoom_ex": true,
        "latitudine": "10.6819262000000000",
        "longitudine": "79.8436796000000000",
        "all_images": []
    },
    "vale_do_paraiba": {
        "name": "VALE DO PARAIBA",
        "text": "<h3>Our Lady of Vale do Paraiba</h3><p>Vale do Paraiba is a region in Brazil known for its religious significance and Marian devotion.</p>",
        "src": "https://picsum.photos/800/600?random=3",
        "src_zoom": "https://picsum.photos/1200/900?random=3",
        "src_ex": true,
        "src_zoom_ex": true,
        "latitudine": "-22.5288981000000000",
        "longitudine": "-44.1447296000000000",
        "all_images": []
    },
    "aokpe": {
        "name": "AOKPE",
        "text": "<h3>Our Lady of Aokpe</h3><p>Aokpe in Nigeria has been a site of reported Marian apparitions attracting numerous pilgrims.</p>",
        "src": "https://picsum.photos/800/600?random=4",
        "src_zoom": "https://picsum.photos/1200/900?random=4",
        "src_ex": true,
        "src_zoom_ex": true,
        "latitudine": "6.9905300000000000",
        "longitudine": "7.8706200000000000",
        "all_images": []
    }
};
</script>

<script> obj_js.small_page_black=0;</script>
</head>

<body class="body_avm">
    <!-- Mobile menu toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle">☰ Menu</button>
    
    <div id="gallery_background"></div>
    <div id="avm_menu_top"></div>
    <div id="avm_menu_list" class="mgmenu_container">
        <ul class="mgmenu">
            <li><a class=" " href="home.html"><span id="home" class="menu_1" style="color:#ffffff;">Home</span></a></li>
            <li><span id="storia-della-mostra" class="menu_1" style="color:#ffffff;">History<br>of the exhibition </span>
                <div class="dropdown_columns dropdown_container" style="display:none;">
                    <ul class="dropdown_flyout">
                        <li><a class=" " href="la-storia-della-mostra.html"><span id="la-storia-della-mostra" class="menu_2" style="color:#000000;">The history of the exhibition</span></a></li>
                        <li><a class=" " href="la-mostra-ideata-da-carlo-acutis.html"><span id="la-mostra-ideata-da-carlo-acutis" class="menu_2" style="color:#000000;">The exhibition designed by Carlo Acutis</span></a></li>
                        <li><a class=" " href="la-madonna-come-la-veneriamo.html"><span id="la-madonna-come-la-veneriamo" class="menu_2" style="color:#000000;">Our Lady, How do we venerate Her?</span></a></li>
                    </ul>
                </div>
            </li>
            <li><span id="lista-delle-apparizioni" class="menu_1 active cursor_menu" style="color:#ffffff;">List of the<br>Apparitions </span>
                <div class="dropdown_columns dropdown_container" style="display:none;">
                    <ul class="dropdown_flyout">
                        <div class="col_4">
                            <!-- Reduced list for mobile -->
                            <li><a class="uppercase" href="vale_do_paraiba.html"><span id="vale_do_paraiba">Brazil</span></a></li>
                            <li><a class="uppercase" href="aokpe.html"><span id="aokpe">Nigeria</span></a></li>
                            <li><a class="uppercase" href="kibeho.html"><span id="kibeho">Rwanda</span></a></li>
                            <li><a class="uppercase" href="absam.html"><span id="absam">Austria</span></a></li>
                        </div>
                    </ul>
                </div>
            </li>
            <li><span id="santorosario" class="menu_1" style="color:#ffffff;">Holy<br>Rosary </span>
                <div class="dropdown_columns dropdown_container" style="display:none;">
                    <ul class="dropdown_flyout">
                        <li><a class=" " href="santorosario-introduzione.html"><span id="santorosario-introduzione" class="menu_2" style="color:#000000;">Introduction</span></a></li>
                        <li><a class=" " href="i-misteri-del-santo-rosario-versione-avorio.html"><span id="i-misteri-del-santo-rosario-versione-avorio" class="menu_2" style="color:#000000;">The Mysteries of the Holy Rosary (ivory version)</span></a></li>
                        <li><a class=" " href="i-misteri-del-santo-rosario-versione-blu.html"><span id="i-misteri-del-santo-rosario-versione-blu" class="menu_2" style="color:#000000;">The Mysteries of the Holy Rosary( blue version )</span></a></li>
                    </ul>
                </div>
            </li>
            <li><a class=" " href="download.html"><span id="download" class="menu_1" style="color:#ffffff;">Download</span></a></li>
            <li><span id="contatti" class="menu_1" style="color:#ffffff;">Contact us </span>
                <div class="dropdown_columns dropdown_container" style="display:none;">
                    <ul class="dropdown_flyout">
                        <li><a class=" " href="contattaci.html"><span id="contattaci" class="menu_2" style="color:#000000;">Contact us</span></a></li>
                    </ul>
                </div>
            </li>
        </ul>
    </div>
    
    <div id="avm_fregio_dec"></div>
    <div id="avm_left_dec"></div>
    <div id="avm_logo_top"><img src="img/avm/logo_en.jpg" height="205" width="205" /></div>
    <div id="avm_logo_stars_top"><img src="img/avm/stars.png" height="205" width="205" /></div>
    <div id="avm_sf_text"></div>
    
    <div id="avm_cont_page">           
        <div id="avm_cont_page_left">
            <div id="avm_page_left"></div>
        </div>
        <div id="avm_cont_page_right">
            <div id="avm_page_right">KALLIKULAM</div>
        </div>          
    </div>
    
    <div id="avm_list_city" style="margin-left: 26px;">
        <div id="avm_list_city_search"><input placeholder="Search city" id="box_search" type="text" /></div>
        <div id="avm_cont_list_city">
            <ul class="navList">
                <!-- Reduced country list for mobile -->
                <li>Brazil
                    <ul class="topList">
                        <li><a longitudine="-44.1447296000000000" latitudine="-22.5288981000000000" src_data="avm/prev/en/ico/vale_do_paraiba_p.jpg" href="vale_do_paraiba.html" city="vale_do_paraiba"><span id="vale_do_paraiba">VALE DO PARAIBA</span></a></li>
                        <li><a longitudine="-36.6981139000000000" latitudine="-8.3583909000000000" src_data="avm/prev/en/ico/pesqueira_p.jpg" href="pesqueira.html" city="pesqueira"><span id="pesqueira">PESQUEIRA</span></a></li>
                    </ul>
                </li>
                <li>Nigeria
                    <ul class="topList">
                        <li><a longitudine="7.8706200000000000" latitudine="6.9905300000000000" src_data="avm/prev/en/ico/aokpe_p.jpg" href="aokpe.html" city="aokpe"><span id="aokpe">AOKPE</span></a></li>
                    </ul>
                </li>
                <li>India
                    <ul class="topList">
                        <li><a class="active" longitudine="77.6643000000000000" latitudine="8.3546000000000000" src_data="avm/prev/en/ico/kallikulam_p.jpg" href="kallikulam.html" city="kallikulam"><span id="kallikulam">KALLIKULAM</span></a></li>
                        <li><a longitudine="79.8436796000000000" latitudine="10.6819262000000000" src_data="avm/prev/en/ico/vailankanni_p.jpg" href="vailankanni.html" city="vailankanni"><span id="vailankanni">VAILANKANNI</span></a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <div id="no_result">No result</div>
    </div>
    
    <!-- FIXED: Country flags are now properly horizontally aligned -->
    <div id="flag_top">
        <div id="cont_Flag_avm_site">
            <a href="#" site="it"><img src="https://flagcdn.com/w40/it.png" alt="Italian" title="Italian"></a>
            <a href="#" site="en"><img src="https://flagcdn.com/w40/gb.png" alt="English" title="English"></a>
            <a href="#" site="fr"><img src="https://flagcdn.com/w40/fr.png" alt="French" title="French"></a>
            <a href="#" site="de"><img src="https://flagcdn.com/w40/de.png" alt="German" title="German"></a>
            <a href="#" site="es"><img src="https://flagcdn.com/w40/es.png" alt="Spanish" title="Spanish"></a>
            <a href="#" site="pt"><img src="https://flagcdn.com/w40/pt.png" alt="Portuguese" title="Portuguese"></a>
        </div>
    </div>
    <div id="_offscreen"></div>
    <div id="cont_carlo_acutis">
        <div id="link_carlo_acutis">
            <a href="http://www.carloacutis.com/" title="Carlo Acutis">
                <img src="img/avm/carlo_piccolo.png">
            </a>
        </div>
    </div>
    <div id="is_traslated"></div>

    

<script>
// Fix for jQuery Migrate error
if (typeof jQuery !== 'undefined') {
    jQuery.migrateMute = true;
}

var megazoom;
var data_el;
var $element = $('#avm_logo_stars_top img');

obj_js.res_img = {'h':10,'v':10};

function fadeInOut() {
    if ($element.length) {
        $element.fadeIn(2000, function() {
            $element.fadeOut(2500, function() {
                $element.fadeIn(2500, function() {
                    setTimeout(fadeInOut, 500);
                });
            });
        });
    }
}

$(function(){
    console.log("Document ready - initializing");
    
    // Detect mobile
    obj_js.is_mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? '1' : '0';
    obj_js.clickEvent = ('ontouchstart' in window ? 'touchend' : 'click');
    obj_js.small_page = 0;
    obj_js.active = 'kallikulam';
    
    // Background images
    obj_js.images_background = [
        {"id":"1","src":"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80","property_image":{}},
        {"id":"2","src":"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80","property_image":{}}
    ];
    
    // Initialize
    obj_js.all_city = Object.keys(sampleCityData).map(function(key) {
        return [sampleCityData[key]];
    });
    
    obj_js.city = {};
    
    // Mobile menu toggle
    $('#mobileMenuToggle').click(function() {
        $('#avm_list_city').toggleClass('mobile-open');
    });
    
    active_list_city();    
    active_flag();   
    Resize();    
    
    $(window).bind('resize', function() {
        obj_js.wind = getViewWindSize(obj_js.width_min, obj_js.height_min); 
        Resize();
    });
    
    // Initialize menu
    $('#avm_menu_list').universalMegaMenu({
        menu_effect: 'hover_fade',
        menu_speed_show: 300,
        menu_speed_hide: 200,
        menu_speed_delay: 200,
        menu_click_outside: true,        
        menubar_hide: false,
        menu_responsive: true
    });        
    
    // Search functionality
    $('#box_search').keyup(function(){
        var valThis = $(this).val().toLowerCase();
        var noresult = 0;
        if(valThis == ""){ 
            $('.navList > li').show();
            $('.navList > li > ul > li').each(function(){ 
                $(this).show();
            });
            noresult = 1;
            $("#no_result").hide();
        } else {
            $('.navList > li > ul > li').each(function(){
                var text = $(this).text().toLowerCase();
                var match = text.indexOf(valThis);
                if (match >= 0) {
                    $(this).show();
                    $(this).parent().parent().show();
                    noresult = 1;
                    $("#no_result").hide();
                } else {
                    $(this).hide();
                }
            });
        }
        $('.topList').each(function(){ 
            if (($(this).children(':visible').length) > 0) {  
                $(this).parent().show();  
            } else { 
                $(this).parent().hide();
            }
        });
        if (noresult == 0) { 
            $("#no_result").show(); 
        }
    });
    
    imagePreview();
    $("#avm_cont_list_city").mCustomScrollbar({autoHideScrollbar:true, theme:"rounded-dark"});
    
    if (!isScrolledIntoView($("#avm_cont_list_city").find('.active'))){
        $("#avm_cont_list_city").mCustomScrollbar('scrollTo', $("#avm_cont_list_city").find('.active').parent().parent().parent());
    }
    
    // Background slideshow
    $(obj_js.images_background).each(function(i, img) {  
        $.extend(img, img.property_image);   
    });
    
    $.vegas_slide('slideshow_slide', {
        delay_slide: 25000,
        position_gallery: "absolute",
        cont_gallery_slide: $("#gallery_background"),
        init_step: 1,
        background_slides: obj_js.images_background
    });
      
    fadeInOut();
    console.log("Initialization complete");
});

// Fixed imagePreview function
this.imagePreview = function(){			
    var xOffset = 130, yOffset = 30;
    
    $(".topList a").hover(function(e){
        $("#preview").remove();                  
        $(this).addClass('hover'); 
        var src = $(this).attr('src_data');
        
        if (src) {
            var previewImg = $('<img />')
                .attr('src', 'https://www.themarianapparitions.org/img/' + src)
                .on('error', function() {
                    $(this).hide();
                    $('#preview').html('<div class="error-message">Preview not available</div>');
                });
                
            $("#avm_cont_page_left").append(
                $('<div id="preview" />')
                    .attr('city', $(this).attr("city"))
                    .append(previewImg)
            );							 
            
            $("#preview")
                .css({"top": (e.pageY - xOffset) + "px", "left": "180px"})
                .fadeIn("fast")
                .click(function(e) {
                    obj_js.active = $(this).attr("city"); 
                    active_flag();  
                    active_list_city_js();   
                    e.preventDefault();   
                    e.stopPropagation();
                    $("#preview").remove();
                    return false;
                });
        }
        
        if(obj_js.clickEvent != "click"){ 
            $(".topList .hover").each(function(){ 
                $(this).removeClass('hover');
            }); 
            $(this).addClass('hover');
        }
    }, function(){
        if(obj_js.clickEvent == "click"){
            $(this).removeClass('hover');
            $("#preview").remove();
        }
    });	
    
    $(".topList a").mousemove(function(e){
        if ($("#preview").length) {
            $("#preview").css({"top": (e.pageY - xOffset) + "px", "left": "180px"});
        }
    });
    
    $(".topList a").click(function(e){
        $(".topList .active").each(function(){ 
            $(this).removeClass('active');
        }); 
        $(this).addClass('active'); 
        obj_js.active = $(this).attr("city"); 
        active_flag(); 
        active_list_city_js();   
        e.preventDefault();   
        e.stopPropagation(); 
        $("#preview").remove();                
        return false;
    });
};

function active_list_city(){
    console.log("active_list_city called for", obj_js.active);
    
    $("#avm_list_city").show();
    $("#avm_cont_page").addClass("sf_black");
    $("#avm_page_right").html("").append(
        '<div id="megazoomPlayList" style="display:none"></div>' +
        '<div id="cont_avm_ico">' +
            '<div id="avm_ico">' +
                '<div class="ico_earth ico" view="map" title="Map"></div>' +
                '<div class="ico_photo_view active ico" view="photo" title="Panel"></div>' +
                '<div class="ico_text ico" view="text" title="Description"></div>' +
                '<div class="ico_zoom ico" view="zoom" title="Zoom"></div>' +
                '<div class="ico_print ico" view="print" title="Print"></div>' +
                '<div class="ico_download ico" view="download" title="Download"></div>' +
            '</div>' +
        '</div>' +
        '<div id="avm_map"></div>' +
        '<div id="avm_text"></div>' +
        '<div id="avm_zoom"></div>' +
        '<div id="avm_photo" class="print_image"></div>' +
        '<div id="avm_preloader"><div class="loading">Loading...</div></div>'
    );
    
    $("#avm_text").mCustomScrollbar({autoHideScrollbar:true, theme:"rounded-dark"});
    
    // Use sample data since CORS might be blocking real requests
    var cityData = sampleCityData[obj_js.active];
    if (cityData) {
        console.log("Loading sample data for", obj_js.active);
        load_image_city(cityData);
    } else {
        console.error("No data available for", obj_js.active);
        $("#avm_preloader").html('<div class="error-message">Data not available for ' + obj_js.active + '</div>');
    }
    
    // Icon click handlers
    $("#avm_ico").find(".ico").on({
        mouseenter: function(e) {
            e.preventDefault(); 
            e.stopPropagation(); 
            if (!$(this).hasClass('active')) { 
                $(this).addClass('hover'); 
            }
        },
        mouseleave: function(e) {
            $(this).removeClass('hover');
            e.preventDefault();
            e.stopPropagation();
        },
        click: function(e) {
            if (!$(this).hasClass('active')) {
                var view = $(this).attr("view");
                console.log("Icon clicked:", view);
                
                if (!(view == "print" || view == "download")) {                                        
                    $("#avm_ico .ico").each(function() {
                        $(this).removeClass('active');
                    });
                    $(this).removeClass('hover').addClass("active");
                    $("#avm_text, #avm_zoom, #avm_photo, #avm_sf_text").hide();
                    
                    if (obj_js.megazoom) {
                        $("#avm_zoom").html("");
                        obj_js.megazoom.destroy();
                        obj_js.megazoom = null; 
                    }
                    
                    $("#avm_map").css({"opacity":0});
                    
                    switch(view) {
                        case "map":
                            $("#avm_cont_page").addClass("sf_black");
                            $("#avm_preloader").show().fadeOut(500);
                            $("#avm_map").css({"opacity":1}).show();
                            $("#avm_map").html('<div class="success-message">Map view would be displayed here</div>');
                            break;
                        case "photo":
                            $("#avm_cont_page").addClass("sf_black");
                            $("#avm_preloader").show().fadeOut(500);
                            $("#avm_photo").hide().fadeIn(500);
                            break;
                        case "text":
                            $("#avm_sf_text").show();
                            $("#avm_cont_page").removeClass("sf_black");
                            $("#avm_preloader").show().fadeOut(500);
                            $("#avm_text").hide().fadeIn(500);
                            break;
                        case "zoom":
                            $("#avm_cont_page").addClass("sf_black");
                            $("#avm_zoom, #avm_preloader").show();
                            $("#avm_zoom").html('<div class="success-message">Zoom view would be displayed here</div>');
                            // Zoom functionality would go here
                            break;
                    }
                } else {
                    if (view == "print") {
                        $('#avm_photo').printArea({"popTitle": $(".topList .active span").html()});                                       
                    } else if (view == "download") {
                        var imgSrc = $("#avm_photo img").attr('src');
                        if (imgSrc) {
                            var link = document.createElement('a');
                            link.href = imgSrc;
                            link.download = $(".topList .active span").html() + '.jpg';
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);
                        }                                     
                    }
                }
            }
        }
    });
    
    // Initialize with photo view
    setTimeout(function() {
        resize_photo($("#avm_photo img:first"), $("#avm_photo"), obj_js.res_img.h, obj_js.res_img.v);
    }, 500);
}

function active_list_city_js(){
    console.log("active_list_city_js called for", obj_js.active);
    
    $("#avm_zoom").html("");
    
    if (!isScrolledIntoView($("#avm_cont_list_city").find('.active'))) {
        $("#avm_cont_list_city").mCustomScrollbar('scrollTo', $("#avm_cont_list_city").find('.active').parent().parent().parent());    
    }
    
    obj_js.active = $(".topList .active").attr("city") || obj_js.active;
    
    $("#avm_cont_page").addClass("sf_black");
    $("#avm_ico .ico").each(function() {
        $(this).removeClass('active');
    });
    $("#avm_text, #avm_zoom, #avm_sf_text").hide(); 
    $(".ico_photo_view").addClass("active");
    $("#avm_map").css({"opacity":0});
    $("#avm_preloader").show();

    // Use sample data
    var cityData = sampleCityData[obj_js.active];
    if (cityData) {
        console.log("Loading sample data for", obj_js.active);
        load_image_city(cityData);
    } else {
        console.error("No data available for", obj_js.active);
        $("#avm_preloader").html('<div class="error-message">City data not found for ' + obj_js.active + '</div>');
    }
}

function load_image_city(data) {
    if (!data) {
        $("#avm_preloader").html('<div class="error-message">No data available</div>');
        return;
    }

    console.log("Loading image for", data.name);

    obj_js.title_page = "Lady's apparitions " + (data.head_title || data.name);
    $('#avm_text .mCSB_container').html(data.text || '<p>No description available.</p>');
    
    if (data.text && data.text != "") {
        $("#avm_ico .ico_text").show();
    } else {
        $("#avm_ico .ico_text").hide();
    }
    
    if (data.src_zoom_ex) {
        $("#avm_ico .ico_zoom").show();
    } else {
        $("#avm_ico .ico_zoom").hide();
    }
    
    if (data.src_ex && data.src) {
        $("#avm_ico .ico_photo_view").show();
        var img = new Image();
        
        img.onerror = function() {
            console.error('Failed to load image:', this.src);
            $("#avm_preloader").fadeOut();
            $('#avm_photo').html('<div class="error-message">Image not available: ' + this.src + '</div>').fadeIn();
        };
        
        img.onload = function() {
            console.log('Image loaded successfully:', this.src);
            $("#avm_preloader").fadeOut();
            $('#avm_photo').hide().html("").append(this).fadeIn(700);
            resize_photo($("#avm_photo img:first"), $("#avm_photo"), obj_js.res_img.h, obj_js.res_img.v);
        };
        
        img.src = data.src;
        console.log('Setting image source to:', data.src);
    } else {
        $("#avm_ico .ico_photo_view").hide();
        $("#avm_preloader").fadeOut();
        $('#avm_photo').html('<div class="error-message">No image available</div>').fadeIn();
    }
    
    // Store city data
    obj_js.city[obj_js.active] = data;
    console.log('City data stored for', obj_js.active);
}

function resize_photo($img, $cont, off_horz, off_vert) {
    if (!$img.length) {
        console.log('No image to resize');
        return;
    }
    
    var ww = $cont.width() - off_horz,
        wh = $cont.height() - off_vert,
        iw = $img.width(),
        ih = $img.height();
        
    if (iw === 0 || ih === 0) {
        console.log('Image dimensions not available yet');
        return;
    }
    
    var rw = wh / ww,
        ri = ih / iw,
        newWidth, newHeight;
        
    if (rw > ri) {
        newWidth = ww;
        newHeight = ww * ri;
    } else {
        newWidth = wh / ri;
        newHeight = wh;
    }
    
    $img.css({
        width: newWidth + "px",
        height: newHeight + "px"
    });
    
    console.log('Image resized to:', newWidth + 'x' + newHeight);
}

function Resize() {
    obj_js.height = Math.max(obj_js.wind.height, obj_js.height_min);
    obj_js.width = Math.max(obj_js.wind.width, obj_js.width_min);
    
    // Responsive adjustments with reduced spacing
    if (obj_js.width < 768) {
        $("#avm_list_city").css({
            "width": "200px" // Reduced width
        });
        $("#avm_cont_page_right").css({
            "width": "calc(100% - 210px)", // Adjusted width
            "margin-left": "210px" // Reduced margin
        });
    } else {
        $("#avm_list_city").css({
            "width": "200px" // Reduced from 291px
        });
        $("#avm_cont_page_right").css({
            "width": "calc(100% - 210px)", // Adjusted from 301px
            "margin-left": "210px" // Reduced from 301px
        });
    }
    
    $("#gallery_background").css({
        "height": (obj_js.height - 32) + "px",
        "width": (obj_js.width - 32) + "px"
    });
    
    $("#avm_menu_top").css({"width": (obj_js.width - 32) + "px"});
    $("#avm_menu_list").css({"width": (obj_js.width - 200) + "px"}); // Adjusted for reduced sidebar
    $("#avm_cont_page").css({
        "height": (obj_js.height - 32 - 40) + "px", 
        "width": (obj_js.width - 32) + "px"
    });
    
    resize_photo($("#avm_photo img:first"), $("#avm_photo"), obj_js.res_img.h, obj_js.res_img.v);
}

function isScrolledIntoView(elem) {
    if ($(elem).length == 0) {
        return false;
    }
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();
    var elemTop = $(elem).offset().top;
    var elemBottom = elemTop + $(elem).height();
    
    return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
}

function active_flag() {
    $("#cont_Flag_avm_site a").each(function() {
        var url = obj_js.base_url + $(this).attr("site") + "/avm/" + obj_js.active;
        $(this).attr({"href": url});
    });
}

// Disable Google Analytics to prevent errors
window.ga = window.ga || function() { console.log('GA disabled:', arguments); };

// Initialize after page load
$(window).on('load', function() {
    console.log("Window loaded - final initialization");
});
</script>

</body>
</html>